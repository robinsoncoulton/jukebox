{"version":3,"sources":["Pages/Home/ApiClient.tsx","App.tsx","Pages/Home/index.tsx","Components/Button/index.tsx","Pages/Pay/index.tsx","Pages/Playlist/index.tsx","Pages/Success/index.tsx","index.tsx"],"names":["token","Pages","Home","react_default","a","createElement","Fragment","lib_default","value","style","marginRight","Button","_ref","onClick","children","getToken","Object","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","console","log","axios","url","method","then","res","data","abrupt","stop","apply","this","arguments","ApiClient","getPlaylist","_getPlaylist","_callee2","playlistId","_context2","t0","t1","concat","t2","t3","sent","t4","call","t5","Authorization","t6","headers","tracks","items","_x","playTrack","_playTrack","_callee3","playlistUri","trackOffset","_context3","context_uri","offset","position","_x2","_x3","queueTrack","_queueTrack","_callee4","trackUri","_context4","_x4","Pay","setPage","pendingTransaction","setPendingTransaction","handlePlay","_ref2","Error","undefined","SUCCESS","handleQueue","_ref3","Components_Button","Playlist","_useState","useState","_useState2","slicedToArray","trackList","setTrackList","useEffect","length","map","selection","index","track","name","artists","playlistIndex","toString","uri","PAY","Success","PLAYLIST","App","page","_useState3","_useState4","className","HOME","Pages_Home","Pages_Pay","Pages_Success","Pages_Playlist","rootElement","document","getElementById","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.440c44d2.chunk.js","sourcesContent":["import axios from \"axios\";\nimport {SpotifyTrack} from \"./types\";\n\nlet token: string;\nconst getToken = async () => {\n    if (!token) {\n        console.log('getting token from server');\n        await axios({\n            // url: `http://localhost:8888/token`,\n            url: `https://protected-tundra-64098.herokuapp.com/token`,\n            method: 'GET',\n        }).then((res) => {\n            token = res.data.token\n        })\n    } else {\n        console.log('using cached token', token)\n    }\n    return token;\n};\n\nconst ApiClient = {\n    getPlaylist: async (playlistId: string): Promise<SpotifyTrack[]> => {\n        const res = await axios({\n            url: `https://api.spotify.com/v1/users/zelkia/playlists/${playlistId}`,\n            method: 'GET',\n            headers: {\n                Authorization: `Bearer ${await getToken()}`,\n            },\n        }).\n            then((res) => res.data)\n        return res.tracks.items;\n    },\n    playTrack: async (playlistUri: string, trackOffset: string): Promise<void> => {\n        await axios({\n            url: `https://api.spotify.com/v1/me/player/play`,\n            method: 'PUT',\n            headers: {\n                Authorization: `Bearer ${await getToken()}`,\n            },\n            data: {\n                \"context_uri\": playlistUri,\n                \"offset\": {\n                    \"position\": trackOffset\n                }\n            }\n        })\n    },\n    queueTrack: async (trackUri: string): Promise<void> => {\n        await axios({\n            url: `https://api.spotify.com/v1/me/player/queue?uri=${trackUri}`,\n            method: 'POST',\n            headers: {\n                Authorization: `Bearer BQDUkYHmcZRiwBuIHECErppmelT0iGQMAQhTsuofd8W_Gom6o_0735OB-NZo2vzOd2h317b-qdqvPfdX2yDEZPjhEV8RGT5SA77YxKA0GbIbjDk7F3IwlUUgnHWSFVSFtMvGgs2ZoNWD9OzhUBWSFj2vlKI9MYZoOLcbZPjScp7NuJOLbMZgeZUg8uosKkFB-dz8qQ`,\n            },\n        })\n    }\n}\n\nexport default ApiClient;\n","import React, {useState} from \"react\";\nimport Home from \"./Pages/Home\";\nimport Pay from \"./Pages/Pay\";\nimport Playlist from \"./Pages/Playlist\";\nimport Success from \"./Pages/Success\";\n\nexport enum Pages {\n    HOME = \"HOME\",\n    PAY = \"PAY\",\n    SUCCESS = \"SUCCESS\",\n    PLAYLIST = \"PLAYLIST\",\n}\n\nexport interface PendingTransaction {\n    playlistUri: string,\n    trackUri: string,\n    offset: string,\n}\n\nfunction App () {\n    const [page, setPage] = useState<Pages>(Pages.PLAYLIST);\n    const [pendingTransaction, setPendingTransaction] = useState<PendingTransaction | undefined>()\n\n    return (\n        <div className=\"App\">\n            {page === Pages.HOME && <Home />}\n            {page === Pages.PAY && pendingTransaction && <Pay setPage={setPage} pendingTransaction={pendingTransaction} setPendingTransaction={setPendingTransaction}/>}\n            {page === Pages.SUCCESS && <Success setPage={setPage}/>}\n            {page === Pages.PLAYLIST && <Playlist setPage={setPage} setPendingTransaction={setPendingTransaction}/>}\n        </div>\n    );\n}\n\nexport default App;\n","import React from \"react\";\nimport QRCode from \"qrcode.react\";\n\nconst Home: React.FC = () => {\n    return (<>\n        <QRCode value=\"http://robinsoncoulton.github.io/jukebox\" style={{marginRight: 50 }} />\n    </>)\n}\n\nexport default Home;\n","import React, {ReactNode} from 'react';\n\ninterface ButtonProps {\n    onClick: () => void;\n    children?: ReactNode\n}\n\nconst Button: React.FC<ButtonProps> = ({onClick, children}) =>\n    <button onClick={onClick}>\n        {children}\n    </button>\n\nexport default Button\n","import React from 'react';\nimport {Pages, PendingTransaction} from \"../../App\";\nimport Button from \"../../Components/Button\";\nimport ApiClient from \"../Home/ApiClient\";\n\n\ninterface PayProps {\n    setPage: (page: Pages) => void,\n    pendingTransaction?: PendingTransaction,\n    setPendingTransaction: (pendingTransaction: PendingTransaction | undefined) => void,\n}\n\nconst Pay: React.FC<PayProps> = ({ setPage, pendingTransaction , setPendingTransaction}) => {\n    const handlePlay = async () => {\n        if (!pendingTransaction) { throw new Error('pending transaction required')}\n        await ApiClient.playTrack(pendingTransaction.playlistUri, pendingTransaction.offset)\n        setPendingTransaction(undefined);\n        setPage(Pages.SUCCESS);\n    }\n\n    const handleQueue = async () => {\n        if (!pendingTransaction) { throw new Error('pending transaction required')}\n        await ApiClient.queueTrack(pendingTransaction.trackUri)\n        setPendingTransaction(undefined);\n        setPage(Pages.SUCCESS);\n    }\n\n    return(<>\n        <p>Your song choice will be added to the queue.</p>\n        <p>There is a charge for this service</p>\n        <Button onClick={handlePlay}>Play now!</Button>\n        <Button onClick={handleQueue}>Queue!</Button>\n    </>)\n}\n\nexport default Pay;\n","import React, {useEffect, useState} from \"react\";\nimport {Pages, PendingTransaction} from \"../../App\";\nimport Button from \"../../Components/Button\";\nimport ApiClient from \"../Home/ApiClient\";\nimport {SpotifyTrack} from \"../Home/types\";\n\n\ninterface PlaylistProps {\n  setPendingTransaction: (pendingTransaction: PendingTransaction) => void;\n  setPage: (page: Pages) => void;\n}\n\nconst Playlist: React.FC<PlaylistProps> = ({ setPendingTransaction, setPage}) => {\n  const playlistId = '4o9vfb37Yvk2SumaYq1TN9'\n  const playlistUri = `spotify:playlist:${playlistId}`\n  const [trackList, setTrackList] = useState<SpotifyTrack[]>([]);\n\n  useEffect(() => {\n    ApiClient.getPlaylist(playlistId).then(data => setTrackList(data));\n  }, [])\n\n  const handleClick = (playlistIndex: string, trackUri: string) => {\n    setPendingTransaction({playlistUri: playlistUri, offset: playlistIndex, trackUri: trackUri});\n    setPage(Pages.PAY)\n  }\n\n  return (<>\n    playlist\n    <Button onClick={async () => setTrackList(await ApiClient.getPlaylist(playlistId))}>Get Playlist</Button>\n    <div>\n      {trackList.length > 0 && trackList.map((selection, index) => <p>{selection.track.name}, {selection.track.artists[0].name} <button onClick={() => handleClick(index.toString(), selection.track.uri)}>PLAY!</button></p>)}\n    </div>\n  </>)\n}\n\nexport default Playlist;\n","import React from 'react';\nimport {Pages} from \"../../App\";\nimport Button from \"../../Components/Button\";\n\ninterface SuccessProps {\n    setPage: (page: Pages) => void;\n}\n\nconst Success: React.FC<SuccessProps> = ({ setPage }) => {\n    const onClick = () => {\n        setPage(Pages.PLAYLIST);\n    }\n    return (<>\n        <p>Your song selection has been added to the queue</p>\n        <Button onClick={onClick}>Take me home!</Button>\n    </>)\n}\n\nexport default Success;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n    <App />,\n    rootElement\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}